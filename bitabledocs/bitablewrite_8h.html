<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>bitable: include/bitablewrite.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bitable
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Ordered immutable key value storage system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('bitablewrite_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bitablewrite.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface for writing to a bitable.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bitablecommon_8h_source.html">bitablecommon.h</a>&quot;</code><br />
</div>
<p><a href="bitablewrite_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a35c5fcd2ec5a5ef538c6616a97a0caa0"><td class="memItemLeft" align="right" valign="top">typedef enum <br class="typebreak" />
<a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#a35c5fcd2ec5a5ef538c6616a97a0caa0">BitableCompletionOptions</a></td></tr>
<tr class="separator:a35c5fcd2ec5a5ef538c6616a97a0caa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3e3b9d13965e881015d84d911f1edc"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a></td></tr>
<tr class="separator:a8d3e3b9d13965e881015d84d911f1edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad29824a0dc38717ceed99aaa1bd36314"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a> { <a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314aaab4ac43c3733f2c73e2c0748e7372da">BCO_NONE</a> = 0, 
<a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314ac4c3a3e8347aa250c163758cdca15c46">BCO_DURABLE</a> = 1, 
<a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314a1fb32ef25d0927cb53afb01163eb9b66">BCO_DISCARD</a> = 2
 }</td></tr>
<tr class="separator:ad29824a0dc38717ceed99aaa1bd36314"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad4f8cd0051509877978e20b9886a6d8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#ad4f8cd0051509877978e20b9886a6d8b">bitable_write_allocate</a> ()</td></tr>
<tr class="separator:ad4f8cd0051509877978e20b9886a6d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4d9362c948328da5c0ae389cdb3d0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#a9b4d9362c948328da5c0ae389cdb3d0b">bitable_write_create</a> (<a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *table, const char *path, uint16_t pageSize, uint16_t keyAlignment, uint16_t dataAlignment)</td></tr>
<tr class="separator:a9b4d9362c948328da5c0ae389cdb3d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a614c0f86fb0b4cfd261dca295621ed82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#a614c0f86fb0b4cfd261dca295621ed82">bitable_append</a> (<a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *table, const <a class="el" href="struct_bitable_value.html">BitableValue</a> *key, const <a class="el" href="struct_bitable_value.html">BitableValue</a> *data)</td></tr>
<tr class="separator:a614c0f86fb0b4cfd261dca295621ed82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac779d611c4776f4799037b52e3a9f305"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#ac779d611c4776f4799037b52e3a9f305">bitable_writable_stats</a> (const <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *table, <a class="el" href="struct_bitable_stats.html">BitableStats</a> *stats)</td></tr>
<tr class="separator:ac779d611c4776f4799037b52e3a9f305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee865d48fdd7f24e58fd6d99bfc16244"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#aee865d48fdd7f24e58fd6d99bfc16244">bitable_write_close</a> (<a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *table, <a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a> options)</td></tr>
<tr class="separator:aee865d48fdd7f24e58fd6d99bfc16244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8f86f194443b4f374598ae3609e1ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bitablewrite_8h.html#aef8f86f194443b4f374598ae3609e1ca">bitable_write_free</a> (<a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *table)</td></tr>
<tr class="separator:aef8f86f194443b4f374598ae3609e1ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for writing to a bitable. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a35c5fcd2ec5a5ef538c6616a97a0caa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a>  <a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options for completing (flushing) the bitable out to disk as it is closed. </p>

</div>
</div>
<a class="anchor" id="a8d3e3b9d13965e881015d84d911f1edc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A bitable that can be written to. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ad29824a0dc38717ceed99aaa1bd36314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options for completing (flushing) the bitable out to disk as it is closed. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ad29824a0dc38717ceed99aaa1bd36314aaab4ac43c3733f2c73e2c0748e7372da"></a>BCO_NONE&#160;</td><td class="fielddoc">
<p>Bitable will be flushed out to the file system, with the header written last, however no syncs will be done so write order to storage is not guaranteed. Use this option if it's not important to be durable following a crash/power failure. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ad29824a0dc38717ceed99aaa1bd36314ac4c3a3e8347aa250c163758cdca15c46"></a>BCO_DURABLE&#160;</td><td class="fielddoc">
<p>Bitable will be flushed out to file system and syncs done in the correct order such that completion is atomic and the rest of the bitable will be on storage before the final header is written out. Headers are checksum'd to guarantee that they are complete/correct. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ad29824a0dc38717ceed99aaa1bd36314a1fb32ef25d0927cb53afb01163eb9b66"></a>BCO_DISCARD&#160;</td><td class="fielddoc">
<p>Don't perform any completion writes, this bitable will not be used. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a614c0f86fb0b4cfd261dca295621ed82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a> bitable_append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_bitable_value.html">BitableValue</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_bitable_value.html">BitableValue</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append a key value pair to the bitable. Keys and pairs are always appended in key sorted order. Duplicate keys are not currently supported. It is the responsibility of the user to order the keys in the order matching the comparison function they will provide for reading. Only directly allocates memory when a new branch level is added. May block performing I/O. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>A writable bitable created with bitable_write_create for the key/value pair to be appended to. Should not be null. </td></tr>
    <tr><td class="paramname">key</td><td>The key of the key value pair to append. The key size needs to be less than BITABLE_MAX_KEY_SIZE. Should not be null. </td></tr>
    <tr><td class="paramname">data</td><td>The value data of the key value pair to append. Should not be null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BR_SUCCESS if the table is successfully created. BR_KEY_INVALID if the key is not valid. BR_MAXIMUM_TABLE_TREE_DEPTH if the tree reaches its maximum depth. BR_FILE_OPERATION_FAILED or BR_FILE_OPEN_FAILED if a file operation fails. </dd></dl>

</div>
</div>
<a class="anchor" id="ac779d611c4776f4799037b52e3a9f305"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a> bitable_writable_stats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_bitable_stats.html">BitableStats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the statistics associated with a particular bitable (including the number of items, depth, page size, key and value alignments etc). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">table</td><td>The open readable bitable to get the stats from. Should not be null. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stats</td><td>The stats from the table. Should not be null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BR_SUCCESS if the stats could successfully be retrieved. </dd></dl>

</div>
</div>
<a class="anchor" id="ad4f8cd0051509877978e20b9886a6d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a>* bitable_write_allocate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a zeroed writable bitable, to be used with bitable_write_create (can be re-used multiple times). </p><dl class="section return"><dt>Returns</dt><dd>The allocated writable bitable. </dd></dl>

</div>
</div>
<a class="anchor" id="aee865d48fdd7f24e58fd6d99bfc16244"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a> bitable_write_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bitablewrite_8h.html#ad29824a0dc38717ceed99aaa1bd36314">BitableCompletionOptions</a>&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a writable bitable created with bitable_write_create. Does not free the memory associated with the writable bitable (that allocated by bitable_write_allocate). Optionally complete or discard the remaining writes required for the table. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The writable bitable to close. Should not be null. </td></tr>
    <tr><td class="paramname">options</td><td>The options for completing (or discarding) the table on close. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BR_SUCCESS if the table is successfully completed/closed. BR_FILE_OPERATION_FAILED if file operations fail and prevent the completion of the bitable writes. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b4d9362c948328da5c0ae389cdb3d0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> <a class="el" href="bitablecommon_8h.html#a1afc578b2f3f472486d93bf036c1d9a5">BitableResult</a> bitable_write_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>keyAlignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dataAlignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an empty bitable for writing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">table</td><td>A writable bitable allocated with bitable_write_allocate that will be initialised with the parameters for the table. Should not be null. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">path</td><td>The path (UTF8 encoding) to create the bitable. This should be the main leaf/data file name. Should not be null. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pageSize</td><td>The size of the page to use. Should be greater or equal to BITABLE_MIN_PAGE_SIZE and less than or equal to BITABLE_MAX_PAGE_SIZE. Should be a power of 2. Recommended to use a memory page size on your target platform. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">keyAlignment</td><td>The alignment that will be used for starting address of keys stored in the table. Needs to be greater than 0, less than BITABLE_MAX_ALIGNMENT and a power of 2. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dataAlignment</td><td>The alignment that will be used for starting address of data value stored in the table. Needs to be greater than 0, less than BITABLE_MAX_ALIGNMENT and a power of 2. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BR_SUCCESS if the table is successfully created. BR_ALREADY_OPEN if the table is already open, BR_PAGESIZE_INVALID if pageSize is not a valid value, BR_ALIGNMENT_INVALID if keyAlignment or dataAlignment are invalid. BR_FILE_OPEN_FAILED, BR_BAD_PATH or BR_FILE_OPERATION_FAILED if a file operation means the file can not be created. </dd></dl>

</div>
</div>
<a class="anchor" id="aef8f86f194443b4f374598ae3609e1ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bitablecommon_8h.html#a438737f7989a89c5b25fd799766eab52">BITABLE_API</a> void bitable_write_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bitablewrite_8h.html#a8d3e3b9d13965e881015d84d911f1edc">BitableWritable</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the allocated bitable. If the bitable has not been closed, the bitable is closed with the BCO_DISCARD option. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The writable bitable to free. Should be allocated by bitable_write_allocate. Should not be null. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="bitablewrite_8h.html">bitablewrite.h</a></li>
    <li class="footer">Generated on Thu Jan 1 2015 19:00:42 for bitable by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
